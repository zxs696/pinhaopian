import{_ as Ee,r as f,I as oe,x as y,o as Ue,c as Ge,a as V,b as e,w as t,d as s,e as n,i as T,v as He,y as Ne,n as je,K as Re,f as i,z as Ye,L as Be,t as u,G as Fe,H as Xe,g as H,h as N,E as j,C as $e}from"./index-OILW0-7z.js";const Je={class:"system-logs-container"},qe={class:"header-content"},Qe={class:"breadcrumb"},Ze={class:"header-actions"},et={class:"card-header"},tt={class:"search-filter"},at={class:"filter-buttons"},lt={class:"stats-content"},nt={class:"stats-number"},ot={class:"stats-content"},st={class:"stats-number"},it={class:"stats-content"},rt={class:"stats-number"},ut={class:"stats-content"},dt={class:"stats-number"},ct={class:"card-header"},pt={class:"chart-container"},mt={class:"chart-placeholder"},ft={class:"logs-list"},vt=["title"],_t=["title"],gt={class:"detail-action"},ht={class:"detail-useragent"},bt={class:"error-message"},wt={class:"error-stack"},St={class:"clear-log-content"},Mt={__name:"SystemLogs",setup(yt){const R=f("system-logs"),b=f(!1),w=f(""),k=f(""),x=f(""),S=f([]),Y=f("7"),se=f([]),W=f(!1),D=f(!1),z=f([]),O=f(""),r=oe({}),v=oe({currentPage:1,pageSize:20}),I=f([{id:"1",level:"info",type:"auth",username:"admin",action:"用户登录成功",ip:"192.168.1.100",userAgent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/116.0.0.0 Safari/537.36",url:"/api/auth/login",method:"POST",status:200,executionTime:120,createdAt:new Date(Date.now()-2*60*60*1e3).toISOString(),params:{username:"admin"}},{id:"2",level:"warning",type:"auth",username:"unknown",action:"密码错误尝试登录",ip:"192.168.1.101",userAgent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Firefox/115.0",url:"/api/auth/login",method:"POST",status:401,executionTime:95,createdAt:new Date(Date.now()-3*60*60*1e3).toISOString(),params:{username:"admin"},errorMessage:"密码错误"},{id:"3",level:"info",type:"auth",username:"editor",action:"用户登出",ip:"192.168.1.102",userAgent:"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.6 Safari/605.1.15",url:"/api/auth/logout",method:"POST",status:200,executionTime:50,createdAt:new Date(Date.now()-4*60*60*1e3).toISOString(),params:{}},{id:"4",level:"info",type:"video",username:"editor",action:"上传新视频《前端开发实战教程》",ip:"192.168.1.102",userAgent:"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.6 Safari/605.1.15",url:"/api/videos",method:"POST",status:200,executionTime:1500,createdAt:new Date(Date.now()-5*60*60*1e3).toISOString(),params:{title:"前端开发实战教程",categoryId:"1"}},{id:"5",level:"info",type:"video",username:"reviewer",action:"审核通过视频《前端开发实战教程》",ip:"192.168.1.103",userAgent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/116.0.0.0 Safari/537.36",url:"/api/videos/1/review",method:"PUT",status:200,executionTime:200,createdAt:new Date(Date.now()-6*60*60*1e3).toISOString(),params:{videoId:"1",status:"approved",comment:"内容健康，符合要求"}},{id:"6",level:"warning",type:"video",username:"reviewer",action:"审核拒绝视频《违规内容示例》",ip:"192.168.1.103",userAgent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/116.0.0.0 Safari/537.36",url:"/api/videos/2/review",method:"PUT",status:200,executionTime:150,createdAt:new Date(Date.now()-7*60*60*1e3).toISOString(),params:{videoId:"2",status:"rejected",comment:"包含违规内容"}},{id:"7",level:"info",type:"video",username:"admin",action:"删除视频《违规内容示例》",ip:"192.168.1.100",userAgent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/116.0.0.0 Safari/537.36",url:"/api/videos/2",method:"DELETE",status:200,executionTime:80,createdAt:new Date(Date.now()-8*60*60*1e3).toISOString(),params:{videoId:"2"}},{id:"8",level:"info",type:"user",username:"admin",action:"创建新用户 user123",ip:"192.168.1.100",userAgent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/116.0.0.0 Safari/537.36",url:"/api/users",method:"POST",status:200,executionTime:120,createdAt:new Date(Date.now()-9*60*60*1e3).toISOString(),params:{username:"user123",nickname:"新用户",roleId:"5"}},{id:"9",level:"info",type:"user",username:"admin",action:"更新用户信息 user123",ip:"192.168.1.100",userAgent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/116.0.0.0 Safari/537.36",url:"/api/users/123",method:"PUT",status:200,executionTime:100,createdAt:new Date(Date.now()-10*60*60*1e3).toISOString(),params:{nickname:"更新后的昵称",email:"user123@example.com"}},{id:"10",level:"info",type:"system",username:"admin",action:"修改系统配置：启用内容审核功能",ip:"192.168.1.100",userAgent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/116.0.0.0 Safari/537.36",url:"/api/system/config",method:"PUT",status:200,executionTime:80,createdAt:new Date(Date.now()-11*60*60*1e3).toISOString(),params:{contentReviewEnabled:!0}},{id:"11",level:"info",type:"permission",username:"admin",action:"更新角色权限：编辑 - 添加视频审核权限",ip:"192.168.1.100",userAgent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/116.0.0.0 Safari/537.36",url:"/api/roles/3/permissions",method:"PUT",status:200,executionTime:150,createdAt:new Date(Date.now()-12*60*60*1e3).toISOString(),params:{roleId:"3",permissions:["video:review"]}},{id:"12",level:"error",type:"error",username:"editor",action:"上传视频失败",ip:"192.168.1.102",userAgent:"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.6 Safari/605.1.15",url:"/api/videos",method:"POST",status:500,executionTime:2500,createdAt:new Date(Date.now()-13*60*60*1e3).toISOString(),params:{title:"新视频上传测试"},errorMessage:"文件上传失败：存储空间已满",errorStack:`Error: 文件上传失败：存储空间已满
    at VideoUploadService.uploadFile (/app/services/video-upload.service.js:45:15)
    at async VideoController.create (/app/controllers/video.controller.js:67:20)`},{id:"13",level:"fatal",type:"error",username:"system",action:"数据库连接失败",ip:"127.0.0.1",userAgent:"System",url:"/api/system/health",method:"GET",status:503,executionTime:10,createdAt:new Date(Date.now()-14*60*60*1e3).toISOString(),errorMessage:"无法连接到数据库服务器",errorStack:`DatabaseConnectionError: 无法连接到数据库服务器
    at DatabaseService.connect (/app/services/database.service.js:23:19)
    at async Server.initialize (/app/server.js:56:12)`},{id:"14",level:"info",type:"auth",username:"user123",action:"首次登录成功",ip:"192.168.1.104",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 16_6 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.6 Mobile/15E148 Safari/604.1",url:"/api/auth/login",method:"POST",status:200,executionTime:180,createdAt:new Date(Date.now()-15*60*60*1e3).toISOString(),params:{username:"user123"}},{id:"15",level:"info",type:"video",username:"user123",action:"观看视频《前端开发实战教程》",ip:"192.168.1.104",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 16_6 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.6 Mobile/15E148 Safari/604.1",url:"/api/videos/1/play",method:"GET",status:200,executionTime:50,createdAt:new Date(Date.now()-16*60*60*1e3).toISOString(),params:{videoId:"1"}},...Array.from({length:50},(l,a)=>{const A=a+16,c=["info","warning","error"],m=["video","user","system","auth"],K=["查看视频列表","搜索视频","更新用户资料","重置密码","添加分类","修改分类","删除分类","查看统计数据","导出数据报表","调整系统参数"],P=["admin","editor","reviewer","user123","user2","system"],E=["192.168.1.100","192.168.1.101","192.168.1.102","192.168.1.103","192.168.1.104"],U=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/116.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.6 Safari/605.1.15","Mozilla/5.0 (iPhone; CPU iPhone OS 16_6 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.6 Mobile/15E148 Safari/604.1","Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Firefox/115.0"];return{id:String(A),level:c[Math.floor(Math.random()*c.length)],type:m[Math.floor(Math.random()*m.length)],username:P[Math.floor(Math.random()*P.length)],action:K[Math.floor(Math.random()*K.length)],ip:E[Math.floor(Math.random()*E.length)],userAgent:U[Math.floor(Math.random()*U.length)],url:`/api/${m[Math.floor(Math.random()*m.length)]}/action`,method:["GET","POST","PUT","DELETE"][Math.floor(Math.random()*4)],status:[200,201,400,401,403,404,500][Math.floor(Math.random()*7)],executionTime:Math.floor(Math.random()*500),createdAt:new Date(Date.now()-(17+a)*60*60*1e3).toISOString(),params:{id:Math.floor(Math.random()*100)}}})]),L=y(()=>I.value.filter(l=>{if(w.value&&!l.action.toLowerCase().includes(w.value.toLowerCase())&&!l.username.toLowerCase().includes(w.value.toLowerCase())||k.value&&l.type!==k.value||x.value&&l.level!==x.value)return!1;if(S.value&&S.value.length===2){const a=new Date(l.createdAt).toISOString().split("T")[0],A=S.value[0],c=S.value[1];if(a<A||a>c)return!1}return!0}).sort((l,a)=>new Date(a.createdAt)-new Date(l.createdAt))),ie=y(()=>{const l=(v.currentPage-1)*v.pageSize,a=l+v.pageSize;return L.value.slice(l,a)}),re=y(()=>{const l=new Date().toISOString().split("T")[0];return I.value.filter(a=>a.createdAt.startsWith(l)).length}),ue=y(()=>L.value.filter(l=>["error","fatal"].includes(l.level)).length),de=y(()=>L.value.filter(l=>l.level==="warning").length),ce=y(()=>L.value.filter(l=>l.type==="auth"&&(l.action.includes("登录")||l.action.includes("login"))).length);function B(l){switch(l){case"info":return"success";case"warning":return"warning";case"error":return"danger";case"fatal":return"danger";default:return"info"}}function F(l){switch(l){case"info":return"信息";case"warning":return"警告";case"error":return"错误";case"fatal":return"致命";default:return l}}function X(l){switch(l){case"auth":return"primary";case"video":return"info";case"user":return"success";case"system":return"warning";case"permission":return"danger";case"error":return"danger";default:return"info"}}function $(l){switch(l){case"auth":return"登录/登出";case"video":return"视频管理";case"user":return"用户管理";case"system":return"系统配置";case"permission":return"权限变更";case"error":return"异常错误";default:return l}}function J(l){return new Date(l).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}function pe(l){return l?l.includes("Chrome")?"Chrome":l.includes("Firefox")?"Firefox":l.includes("Safari")?l.includes("Mobile")?"Mobile Safari":"Safari":l.includes("Edge")?"Edge":l.includes("MSIE")?"Internet Explorer":l.length>20?l.substring(0,20)+"...":l:""}function me(l){return l?l.includes("Mobile")?"移动设备":l.includes("iPad")||l.includes("Tablet")?"平板设备":l.includes("Windows")?"Windows 桌面":l.includes("Macintosh")?"Mac 桌面":l.includes("System")?"系统服务":"未知设备":""}function fe(l){R.value=l,console.log("选择菜单:",l)}function ve(){v.currentPage=1,console.log("搜索日志:",w.value)}function _e(){w.value="",k.value="",x.value="",S.value=[],v.currentPage=1}function ge(l){se.value=l}function he(l){q(l)}function q(l){Object.assign(r,l),W.value=!0}function Q(){W.value=!1,Object.keys(r).forEach(l=>delete r[l])}function be(){b.value=!0,setTimeout(()=>{b.value=!1,j.success("日志导出成功")},1e3)}function we(){D.value=!0}function Z(){D.value=!1,z.value=[],O.value=""}function Se(){$e.confirm("此操作将永久删除符合条件的日志记录，是否继续？","最终确认",{confirmButtonText:"确认删除",cancelButtonText:"取消",type:"danger"}).then(()=>{b.value=!0,setTimeout(()=>{z.value.length===2||O.value?j.success("已按条件清空日志"):(I.value=[],j.success("已清空所有日志")),D.value=!1,b.value=!1},1e3)}).catch(()=>{})}function Me(l){v.pageSize=l,v.currentPage=1}function ye(l){v.currentPage=l}return Ue(()=>{b.value=!0,setTimeout(()=>{b.value=!1},500)}),(l,a)=>{const A=s("data-line"),c=s("el-icon"),m=s("el-menu-item"),K=s("grid"),P=s("user-group"),E=s("Lock"),U=s("el-menu"),Te=s("el-aside"),ee=s("el-breadcrumb-item"),ke=s("el-breadcrumb"),h=s("el-button"),xe=s("el-header"),C=s("el-tag"),De=s("el-input"),g=s("el-col"),d=s("el-option"),G=s("el-select"),te=s("el-date-picker"),ae=s("el-row"),M=s("el-card"),Le=s("el-empty"),_=s("el-table-column"),Ae=s("View"),Ce=s("el-table"),Ve=s("el-pagination"),We=s("el-main"),le=s("el-container"),p=s("el-descriptions-item"),ze=s("el-code"),Oe=s("el-scrollbar"),Ie=s("el-descriptions"),ne=s("el-dialog"),Ke=s("WarningFilled"),Pe=Xe("loading");return V(),Ge("div",Je,[e(le,{class:"main-container"},{default:t(()=>[e(Te,{width:"240px",class:"sidebar"},{default:t(()=>[a[19]||(a[19]=n("div",{class:"sidebar-header"},[n("h2",null,"视频管理系统")],-1)),e(U,{"default-active":R.value,class:"el-menu-vertical",onSelect:fe},{default:t(()=>[e(m,{index:"dashboard"},{default:t(()=>[e(c,null,{default:t(()=>[e(A)]),_:1}),a[11]||(a[11]=n("span",null,"数据概览",-1))]),_:1}),e(m,{index:"video-management"},{default:t(()=>[e(c,null,{default:t(()=>[e(T(He))]),_:1}),a[12]||(a[12]=n("span",null,"视频管理",-1))]),_:1}),e(m,{index:"pending-videos"},{default:t(()=>[e(c,null,{default:t(()=>[e(T(Ne))]),_:1}),a[13]||(a[13]=n("span",null,"待审核视频",-1))]),_:1}),e(m,{index:"user-management"},{default:t(()=>[e(c,null,{default:t(()=>[e(T(je))]),_:1}),a[14]||(a[14]=n("span",null,"用户管理",-1))]),_:1}),e(m,{index:"category-management"},{default:t(()=>[e(c,null,{default:t(()=>[e(K)]),_:1}),a[15]||(a[15]=n("span",null,"分类管理",-1))]),_:1}),e(m,{index:"role-management"},{default:t(()=>[e(c,null,{default:t(()=>[e(P)]),_:1}),a[16]||(a[16]=n("span",null,"角色管理",-1))]),_:1}),e(m,{index:"security-settings"},{default:t(()=>[e(c,null,{default:t(()=>[e(E)]),_:1}),a[17]||(a[17]=n("span",null,"安全设置",-1))]),_:1}),e(m,{index:"system-logs"},{default:t(()=>[e(c,null,{default:t(()=>[e(T(Re))]),_:1}),a[18]||(a[18]=n("span",null,"系统日志",-1))]),_:1})]),_:1},8,["default-active"])]),_:1}),e(le,null,{default:t(()=>[e(xe,{height:"60px",class:"header"},{default:t(()=>[n("div",qe,[n("div",Qe,[e(ke,{separator:"/"},{default:t(()=>[e(ee,{to:{path:"/admin"}},{default:t(()=>[...a[20]||(a[20]=[i("首页",-1)])]),_:1}),e(ee,null,{default:t(()=>[...a[21]||(a[21]=[i("系统日志",-1)])]),_:1})]),_:1})]),n("div",Ze,[e(h,{type:"primary",onClick:be},{default:t(()=>[e(c,null,{default:t(()=>[e(T(Ye))]),_:1}),a[22]||(a[22]=i(" 导出日志 ",-1))]),_:1}),e(h,{type:"danger",onClick:we,disabled:I.value.length===0},{default:t(()=>[e(c,null,{default:t(()=>[e(T(Be))]),_:1}),a[23]||(a[23]=i(" 清空日志 ",-1))]),_:1},8,["disabled"])])])]),_:1}),e(We,{class:"content"},{default:t(()=>[e(M,null,{header:t(()=>[n("div",et,[a[25]||(a[25]=n("span",null,"系统日志",-1)),e(C,{type:"info"},{default:t(()=>[...a[24]||(a[24]=[i("操作记录与系统行为追踪",-1)])]),_:1})])]),default:t(()=>[n("div",tt,[e(ae,{gutter:12},{default:t(()=>[e(g,{span:6},{default:t(()=>[e(De,{modelValue:w.value,"onUpdate:modelValue":a[0]||(a[0]=o=>w.value=o),placeholder:"搜索操作内容或用户名","prefix-icon":"Search"},null,8,["modelValue"])]),_:1}),e(g,{span:4},{default:t(()=>[e(G,{modelValue:k.value,"onUpdate:modelValue":a[1]||(a[1]=o=>k.value=o),placeholder:"日志类型",clearable:""},{default:t(()=>[e(d,{label:"全部",value:""}),e(d,{label:"登录/登出",value:"auth"}),e(d,{label:"视频管理",value:"video"}),e(d,{label:"用户管理",value:"user"}),e(d,{label:"系统配置",value:"system"}),e(d,{label:"权限变更",value:"permission"}),e(d,{label:"异常错误",value:"error"})]),_:1},8,["modelValue"])]),_:1}),e(g,{span:4},{default:t(()=>[e(G,{modelValue:x.value,"onUpdate:modelValue":a[2]||(a[2]=o=>x.value=o),placeholder:"日志级别",clearable:""},{default:t(()=>[e(d,{label:"全部",value:""}),e(d,{label:"信息",value:"info"}),e(d,{label:"警告",value:"warning"}),e(d,{label:"错误",value:"error"}),e(d,{label:"致命",value:"fatal"})]),_:1},8,["modelValue"])]),_:1}),e(g,{span:5},{default:t(()=>[e(te,{modelValue:S.value,"onUpdate:modelValue":a[3]||(a[3]=o=>S.value=o),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1}),e(g,{span:5},{default:t(()=>[n("div",at,[e(h,{type:"primary",onClick:ve},{default:t(()=>[...a[26]||(a[26]=[i("搜索",-1)])]),_:1}),e(h,{onClick:_e},{default:t(()=>[...a[27]||(a[27]=[i("重置",-1)])]),_:1})])]),_:1})]),_:1})]),e(ae,{gutter:20,class:"stats-row"},{default:t(()=>[e(g,{span:6},{default:t(()=>[e(M,{shadow:"hover",class:"stats-card"},{default:t(()=>[n("div",lt,[n("div",nt,u(re.value),1),a[28]||(a[28]=n("div",{class:"stats-label"},"今日总日志",-1))])]),_:1})]),_:1}),e(g,{span:6},{default:t(()=>[e(M,{shadow:"hover",class:"stats-card"},{default:t(()=>[n("div",ot,[n("div",st,u(ue.value),1),a[29]||(a[29]=n("div",{class:"stats-label"},"错误日志",-1))])]),_:1})]),_:1}),e(g,{span:6},{default:t(()=>[e(M,{shadow:"hover",class:"stats-card"},{default:t(()=>[n("div",it,[n("div",rt,u(de.value),1),a[30]||(a[30]=n("div",{class:"stats-label"},"警告日志",-1))])]),_:1})]),_:1}),e(g,{span:6},{default:t(()=>[e(M,{shadow:"hover",class:"stats-card"},{default:t(()=>[n("div",ut,[n("div",dt,u(ce.value),1),a[31]||(a[31]=n("div",{class:"stats-label"},"登录记录",-1))])]),_:1})]),_:1})]),_:1}),e(M,{class:"chart-card"},{header:t(()=>[n("div",ct,[a[32]||(a[32]=n("span",null,"日志趋势分析",-1)),e(G,{modelValue:Y.value,"onUpdate:modelValue":a[4]||(a[4]=o=>Y.value=o),placeholder:"时间范围",size:"small"},{default:t(()=>[e(d,{label:"近7天",value:"7"}),e(d,{label:"近30天",value:"30"}),e(d,{label:"近90天",value:"90"})]),_:1},8,["modelValue"])])]),default:t(()=>[n("div",pt,[n("div",mt,[e(Le,{description:"图表数据展示区域"})])])]),_:1}),n("div",ft,[Fe((V(),H(Ce,{data:ie.value,style:{width:"100%"},onSelectionChange:ge,onRowClick:he,"row-class-name":"log-row"},{default:t(()=>[e(_,{type:"selection",width:"55"}),e(_,{prop:"id",label:"日志ID",width:"100"}),e(_,{prop:"level",label:"级别",width:"80"},{default:t(o=>[e(C,{type:B(o.row.level),size:"small"},{default:t(()=>[i(u(F(o.row.level)),1)]),_:2},1032,["type"])]),_:1}),e(_,{prop:"type",label:"类型",width:"120"},{default:t(o=>[e(C,{type:X(o.row.type),size:"small"},{default:t(()=>[i(u($(o.row.type)),1)]),_:2},1032,["type"])]),_:1}),e(_,{prop:"username",label:"操作人",width:"120"}),e(_,{prop:"action",label:"操作内容","min-width":"300"},{default:t(o=>[n("div",{class:"action-content",title:o.row.action},u(o.row.action),9,vt)]),_:1}),e(_,{prop:"ip",label:"IP地址",width:"140"}),e(_,{prop:"userAgent",label:"浏览器","min-width":"200"},{default:t(o=>[n("div",{class:"user-agent",title:o.row.userAgent},u(pe(o.row.userAgent)),9,_t)]),_:1}),e(_,{prop:"createdAt",label:"操作时间",width:"180",sortable:""},{default:t(o=>[i(u(J(o.row.createdAt)),1)]),_:1}),e(_,{label:"操作",width:"120",fixed:"right"},{default:t(o=>[e(h,{type:"primary",size:"small",onClick:Tt=>q(o.row)},{default:t(()=>[e(c,null,{default:t(()=>[e(Ae)]),_:1}),a[33]||(a[33]=i(" 查看 ",-1))]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[Pe,b.value]])]),e(Ve,{"current-page":v.currentPage,"onUpdate:currentPage":a[5]||(a[5]=o=>v.currentPage=o),"page-size":v.pageSize,"onUpdate:pageSize":a[6]||(a[6]=o=>v.pageSize=o),"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",total:L.value.length,class:"pagination",onSizeChange:Me,onCurrentChange:ye},null,8,["current-page","page-size","total"])]),_:1})]),_:1})]),_:1})]),_:1}),e(ne,{modelValue:W.value,"onUpdate:modelValue":a[7]||(a[7]=o=>W.value=o),title:"日志详情",width:"800px","before-close":Q},{footer:t(()=>[e(h,{onClick:Q},{default:t(()=>[...a[34]||(a[34]=[i("关闭",-1)])]),_:1})]),default:t(()=>[e(Ie,{column:2,border:""},{default:t(()=>[e(p,{label:"日志ID"},{default:t(()=>[i(u(r.id),1)]),_:1}),e(p,{label:"日志级别"},{default:t(()=>[e(C,{type:B(r.level)},{default:t(()=>[i(u(F(r.level)),1)]),_:1},8,["type"])]),_:1}),e(p,{label:"日志类型"},{default:t(()=>[e(C,{type:X(r.type)},{default:t(()=>[i(u($(r.type)),1)]),_:1},8,["type"])]),_:1}),e(p,{label:"操作时间"},{default:t(()=>[i(u(J(r.createdAt)),1)]),_:1}),e(p,{label:"操作人",span:2},{default:t(()=>[i(u(r.username||"系统"),1)]),_:1}),e(p,{label:"IP地址",span:2},{default:t(()=>[i(u(r.ip),1)]),_:1}),e(p,{label:"操作内容",span:2},{default:t(()=>[n("div",gt,u(r.action),1)]),_:1}),e(p,{label:"用户代理",span:2},{default:t(()=>[n("div",ht,u(r.userAgent),1)]),_:1}),e(p,{label:"请求URL",span:2},{default:t(()=>[i(u(r.url),1)]),_:1}),e(p,{label:"请求方法"},{default:t(()=>[i(u(r.method),1)]),_:1}),e(p,{label:"响应状态"},{default:t(()=>[i(u(r.status),1)]),_:1}),e(p,{label:"执行时间(ms)"},{default:t(()=>[i(u(r.executionTime)+"ms",1)]),_:1}),e(p,{label:"设备信息"},{default:t(()=>[i(u(me(r.userAgent)),1)]),_:1}),r.params?(V(),H(p,{key:0,label:"请求参数",span:2},{default:t(()=>[e(ze,{code:JSON.stringify(r.params,null,2)},null,8,["code"])]),_:1})):N("",!0),r.errorMessage?(V(),H(p,{key:1,label:"错误信息",span:2},{default:t(()=>[n("div",bt,u(r.errorMessage),1)]),_:1})):N("",!0),r.errorStack?(V(),H(p,{key:2,label:"错误堆栈",span:2},{default:t(()=>[e(Oe,{height:"200px"},{default:t(()=>[n("pre",wt,u(r.errorStack),1)]),_:1})]),_:1})):N("",!0)]),_:1})]),_:1},8,["modelValue"]),e(ne,{modelValue:D.value,"onUpdate:modelValue":a[10]||(a[10]=o=>D.value=o),title:"确认清空",width:"400px","before-close":Z},{footer:t(()=>[e(h,{onClick:Z},{default:t(()=>[...a[37]||(a[37]=[i("取消",-1)])]),_:1}),e(h,{type:"danger",onClick:Se},{default:t(()=>[...a[38]||(a[38]=[i("确认清空",-1)])]),_:1})]),default:t(()=>[n("div",St,[e(c,{size:"48",class:"warning-icon"},{default:t(()=>[e(Ke)]),_:1}),a[35]||(a[35]=n("p",{class:"warning-text"},"确定要清空所有日志记录吗？",-1)),a[36]||(a[36]=n("p",{class:"warning-subtext"},"此操作不可撤销，清空后将无法恢复。",-1)),e(te,{modelValue:z.value,"onUpdate:modelValue":a[8]||(a[8]=o=>z.value=o),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"YYYY-MM-DD",class:"date-picker"},null,8,["modelValue"]),e(G,{modelValue:O.value,"onUpdate:modelValue":a[9]||(a[9]=o=>O.value=o),placeholder:"选择日志类型",clearable:"",class:"log-type-select"},{default:t(()=>[e(d,{label:"全部类型",value:""}),e(d,{label:"登录/登出",value:"auth"}),e(d,{label:"视频管理",value:"video"}),e(d,{label:"用户管理",value:"user"}),e(d,{label:"系统配置",value:"system"}),e(d,{label:"权限变更",value:"permission"}),e(d,{label:"异常错误",value:"error"})]),_:1},8,["modelValue"])])]),_:1},8,["modelValue"])])}}},xt=Ee(Mt,[["__scopeId","data-v-cf83ddf6"]]);export{xt as default};
