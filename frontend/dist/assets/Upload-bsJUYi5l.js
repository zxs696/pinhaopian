import{_ as T,r as m,c as w,a as f,b as l,w as o,d as a,e as n,g as q,h as y,i as z,j as F,f as U,E as d,k as P}from"./index-OILW0-7z.js";const S={class:"upload-container"},W={key:0,class:"video-preview"},I=["src"],$={__name:"Upload",setup(A){const v=m(!1),u=m(null),c=m(""),t=m({title:"",description:"",category:"",tags:[]});function x(i){if(u.value=i.raw,c.value=URL.createObjectURL(u.value),u.value.name){const e=u.value.name.split(".").slice(0,-1).join(".");t.value.title=e}}function k(i){return i.size/1024/1024>200?(d.error("视频文件大小不能超过200MB"),!1):["video/mp4","video/webm","video/quicktime"].includes(i.type)?!0:(d.error("只支持MP4、WebM、MOV格式的视频文件"),!1)}function M(i,e){d.warning(`只能上传一个视频文件，已选择 ${i.length} 个文件`)}function B(){if(!t.value.title){d.error("请输入视频标题");return}if(!t.value.category){d.error("请选择视频分类");return}if(!u.value){d.error("请选择要上传的视频文件");return}v.value=!0,setTimeout(()=>{v.value=!1,P({title:"上传成功",message:"您的视频已成功上传，正在审核中",type:"success"}),_()},2e3)}function C(){_(),d.info("已取消上传")}function _(){c.value&&URL.revokeObjectURL(c.value),u.value=null,c.value="",t.value={title:"",description:"",category:"",tags:[]}}return(i,e)=>{const g=a("el-icon"),N=a("el-upload"),E=a("el-card"),b=a("el-input"),p=a("el-form-item"),r=a("el-option"),L=a("el-select"),h=a("el-tag-input"),V=a("el-button"),j=a("el-form"),O=a("el-main"),R=a("el-container");return f(),w("div",S,[l(R,{class:"main-container"},{default:o(()=>[l(O,null,{default:o(()=>[e[10]||(e[10]=n("div",{class:"upload-header"},[n("h1",null,"上传视频"),n("p",null,"分享你的精彩瞬间，让更多人看到")],-1)),l(E,{class:"upload-card"},{default:o(()=>[l(N,{class:"video-upload",drag:"",action:"#","auto-upload":!1,"on-change":x,"before-upload":k,accept:"video/*",limit:1,"on-exceed":M},{tip:o(()=>[...e[4]||(e[4]=[n("div",{class:"el-upload__tip"}," 支持 MP4、WebM、MOV 格式，单个文件不超过 200MB ",-1)])]),default:o(()=>[l(g,{class:"el-icon--upload"},{default:o(()=>[l(z(F))]),_:1}),e[5]||(e[5]=n("div",{class:"el-upload__text"},[n("em",null,"点击或拖拽视频文件到此区域上传")],-1))]),_:1}),u.value?(f(),w("div",W,[e[6]||(e[6]=n("h3",null,"视频预览",-1)),n("video",{src:c.value,controls:"",class:"preview-video"},null,8,I)])):y("",!0)]),_:1}),u.value?(f(),q(j,{key:0,model:t.value,"label-width":"120px",class:"video-info-form"},{default:o(()=>[l(p,{label:"视频标题",required:""},{default:o(()=>[l(b,{modelValue:t.value.title,"onUpdate:modelValue":e[0]||(e[0]=s=>t.value.title=s),placeholder:"请输入视频标题",maxlength:"100","show-word-limit":""},null,8,["modelValue"])]),_:1}),l(p,{label:"视频描述"},{default:o(()=>[l(b,{modelValue:t.value.description,"onUpdate:modelValue":e[1]||(e[1]=s=>t.value.description=s),type:"textarea",rows:4,placeholder:"请输入视频描述（选填）",maxlength:"500","show-word-limit":""},null,8,["modelValue"])]),_:1}),l(p,{label:"选择分类",required:""},{default:o(()=>[l(L,{modelValue:t.value.category,"onUpdate:modelValue":e[2]||(e[2]=s=>t.value.category=s),placeholder:"请选择视频分类"},{default:o(()=>[l(r,{label:"生活",value:"life"}),l(r,{label:"科技",value:"tech"}),l(r,{label:"娱乐",value:"entertainment"}),l(r,{label:"教育",value:"education"}),l(r,{label:"音乐",value:"music"}),l(r,{label:"其他",value:"other"})]),_:1},8,["modelValue"])]),_:1}),l(p,{label:"标签"},{default:o(()=>[l(h,{modelValue:t.value.tags,"onUpdate:modelValue":e[3]||(e[3]=s=>t.value.tags=s),placeholder:"请输入标签，用空格分隔","input-width":"200px"},null,8,["modelValue"]),e[7]||(e[7]=n("div",{class:"form-tip"},"最多添加5个标签，每个标签不超过10个字符",-1))]),_:1}),l(p,null,{default:o(()=>[l(V,{type:"primary",loading:v.value,onClick:B},{default:o(()=>[...e[8]||(e[8]=[U(" 提交上传 ",-1)])]),_:1},8,["loading"]),l(V,{onClick:C},{default:o(()=>[...e[9]||(e[9]=[U("取消",-1)])]),_:1})]),_:1})]),_:1},8,["model"])):y("",!0)]),_:1})]),_:1})])}}},G=T($,[["__scopeId","data-v-eff8a8e8"]]);export{G as default};
