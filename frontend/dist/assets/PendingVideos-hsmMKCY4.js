import{_ as de,r as m,x as re,o as ce,c as C,a as x,b as t,w as l,d as s,e as o,i as V,m as pe,v as ve,n as fe,p as _e,f as u,A as ge,B as me,t as p,h as P,F as he,D as we,E as k,C as S,g as ye}from"./index-OILW0-7z.js";const be={class:"pending-videos-container"},xe={class:"header-content"},Ce={class:"breadcrumb"},Ve={class:"header-actions"},ke={class:"card-header"},Se={class:"pending-count"},ze={class:"filter-section"},Pe={class:"video-title"},Be={class:"table-footer"},Te={key:0,class:"batch-actions"},Ie={class:"pagination"},Ue={key:0,class:"video-preview-container"},Me=["src"],$e={class:"preview-info"},De={class:"preview-uploader"},Ee={class:"preview-category"},Le={class:"preview-description"},Ne={class:"preview-tags"},je={key:0},Fe={class:"preview-actions"},Ae={__name:"PendingVideos",setup(Ke){const B=m("pending-videos"),h=m(""),w=m(""),v=m([]),y=m(!1),d=m(null),f=m({currentPage:1,pageSize:10}),r=m([{id:"1001",title:"城市夜景延时摄影",uploader:"creator123",category:"life",duration:360,uploadTime:"2024-01-15 10:30:00",coverImage:"/logo.png",videoUrl:"#",description:"记录城市夜晚的美丽景色",tags:["延时摄影","城市","夜景"]},{id:"1002",title:"Python数据分析入门教程",uploader:"teacher456",category:"education",duration:1200,uploadTime:"2024-01-15 09:45:00",coverImage:"/logo.png",videoUrl:"#",description:"从零开始学习Python数据分析",tags:["Python","数据分析","教程"]},{id:"1003",title:"最新科技产品开箱",uploader:"techreviewer",category:"tech",duration:600,uploadTime:"2024-01-15 08:20:00",coverImage:"/logo.png",videoUrl:"#",description:"最新科技产品的开箱体验",tags:["科技","开箱","评测"]}]),T=re(()=>{let n=[...r.value];if(h.value){const e=h.value.toLowerCase();n=n.filter(i=>i.title.toLowerCase().includes(e)||i.uploader.toLowerCase().includes(e))}return w.value&&(n=n.filter(e=>e.category===w.value)),n});ce(()=>{I()});function I(){console.log("加载待审核视频数据")}function N(n){B.value=n,console.log("选择菜单:",n)}function U(){f.value.currentPage=1,console.log("搜索关键词:",h.value),console.log("选择分类:",w.value)}function j(){h.value="",w.value="",f.value.currentPage=1}function F(n){v.value=n}function A(n){d.value=n,y.value=!0}function z(){y.value=!1,d.value=null}function M(n){S.confirm("确定要通过此视频的审核吗？","审核确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{const e=r.value.findIndex(i=>i.id===n.id);e!==-1&&r.value.splice(e,1),k.success("视频审核通过"),y.value&&z()}).catch(()=>{})}function $(n){S.prompt("请输入拒绝理由","拒绝审核",{confirmButtonText:"确定",cancelButtonText:"取消",inputPlaceholder:"请输入拒绝原因"}).then(({value:e})=>{const i=r.value.findIndex(_=>_.id===n.id);i!==-1&&r.value.splice(i,1),k.success("视频已拒绝"),y.value&&z()}).catch(()=>{})}function K(){S.confirm(`确定要通过选中的 ${v.value.length} 个视频吗？`,"批量审核",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{v.value.forEach(n=>{const e=r.value.findIndex(i=>i.id===n.id);e!==-1&&r.value.splice(e,1)}),v.value=[],k.success("批量通过成功")}).catch(()=>{})}function R(){S.prompt("请输入批量拒绝理由","批量拒绝",{confirmButtonText:"确定",cancelButtonText:"取消",inputPlaceholder:"请输入拒绝原因"}).then(({value:n})=>{v.value.forEach(e=>{const i=r.value.findIndex(_=>_.id===e.id);i!==-1&&r.value.splice(i,1)}),v.value=[],k.success("批量拒绝成功")}).catch(()=>{})}function q(){I(),k.success("列表已刷新")}function G(n){f.value.pageSize=n}function H(n){f.value.currentPage=n}function J(n){const e=Math.floor(n/60),i=n%60;return`${e}:${i.toString().padStart(2,"0")}`}function O(n){return new Date(n).toLocaleString("zh-CN")}function Q(n){return{life:"生活",tech:"科技",entertainment:"娱乐",education:"教育",music:"音乐",other:"其他"}[n]||n}return(n,e)=>{const i=s("el-icon"),_=s("el-menu-item"),W=s("el-menu"),X=s("el-aside"),D=s("el-breadcrumb-item"),Y=s("el-breadcrumb"),c=s("el-button"),Z=s("el-header"),ee=s("el-input"),b=s("el-option"),te=s("el-select"),g=s("el-table-column"),le=s("el-avatar"),ne=s("el-table"),oe=s("el-pagination"),ae=s("el-card"),ie=s("el-main"),E=s("el-container"),se=s("el-tag"),ue=s("el-dialog");return x(),C("div",be,[t(E,{class:"main-container"},{default:l(()=>[t(X,{width:"240px",class:"sidebar"},{default:l(()=>[e[11]||(e[11]=o("div",{class:"sidebar-header"},[o("h2",null,"视频管理系统")],-1)),t(W,{"default-active":B.value,class:"el-menu-vertical",onSelect:N},{default:l(()=>[t(_,{index:"dashboard"},{default:l(()=>[t(i,null,{default:l(()=>[t(V(pe))]),_:1}),e[7]||(e[7]=o("span",null,"数据概览",-1))]),_:1}),t(_,{index:"pending-videos"},{default:l(()=>[t(i,null,{default:l(()=>[t(V(ve))]),_:1}),e[8]||(e[8]=o("span",null,"待审核视频",-1))]),_:1}),t(_,{index:"users"},{default:l(()=>[t(i,null,{default:l(()=>[t(V(fe))]),_:1}),e[9]||(e[9]=o("span",null,"用户管理",-1))]),_:1}),t(_,{index:"categories"},{default:l(()=>[t(i,null,{default:l(()=>[t(V(_e))]),_:1}),e[10]||(e[10]=o("span",null,"分类管理",-1))]),_:1})]),_:1},8,["default-active"])]),_:1}),t(E,null,{default:l(()=>[t(Z,{height:"60px",class:"header"},{default:l(()=>[o("div",xe,[o("div",Ce,[t(Y,{separator:"/"},{default:l(()=>[t(D,{to:{path:"/admin"}},{default:l(()=>[...e[12]||(e[12]=[u("首页",-1)])]),_:1}),t(D,null,{default:l(()=>[...e[13]||(e[13]=[u("待审核视频",-1)])]),_:1})]),_:1})]),o("div",Ve,[t(c,{type:"primary",onClick:q},{default:l(()=>[t(i,null,{default:l(()=>[t(V(ge))]),_:1}),e[14]||(e[14]=u(" 刷新列表 ",-1))]),_:1})])])]),_:1}),t(ie,{class:"content"},{default:l(()=>[t(ae,null,{header:l(()=>[o("div",ke,[e[15]||(e[15]=o("span",null,"待审核视频列表",-1)),o("span",Se,"（共 "+p(r.value.length)+" 个视频）",1)])]),default:l(()=>[o("div",ze,[t(ee,{modelValue:h.value,"onUpdate:modelValue":e[0]||(e[0]=a=>h.value=a),placeholder:"搜索视频标题或上传者",class:"search-input","prefix-icon":"Search",onKeyup:me(U,["enter"])},null,8,["modelValue"]),t(te,{modelValue:w.value,"onUpdate:modelValue":e[1]||(e[1]=a=>w.value=a),placeholder:"选择分类",class:"category-select"},{default:l(()=>[t(b,{label:"全部分类",value:""}),t(b,{label:"生活",value:"life"}),t(b,{label:"科技",value:"tech"}),t(b,{label:"娱乐",value:"entertainment"}),t(b,{label:"教育",value:"education"}),t(b,{label:"音乐",value:"music"})]),_:1},8,["modelValue"]),t(c,{type:"primary",onClick:U},{default:l(()=>[...e[16]||(e[16]=[u("搜索",-1)])]),_:1}),t(c,{onClick:j},{default:l(()=>[...e[17]||(e[17]=[u("重置",-1)])]),_:1})]),t(ne,{data:T.value,style:{width:"100%"},onSelectionChange:F},{default:l(()=>[t(g,{type:"selection",width:"55"}),t(g,{prop:"id",label:"ID",width:"80"}),t(g,{prop:"title",label:"视频标题","min-width":"200"},{default:l(a=>[o("div",Pe,[t(le,{size:40,src:a.row.coverImage,class:"video-cover"},null,8,["src"]),o("span",null,p(a.row.title),1)])]),_:1}),t(g,{prop:"uploader",label:"上传者",width:"120"}),t(g,{prop:"category",label:"分类",width:"100"}),t(g,{prop:"duration",label:"时长",width:"80"},{default:l(a=>[u(p(J(a.row.duration)),1)]),_:1}),t(g,{prop:"uploadTime",label:"上传时间",width:"180"},{default:l(a=>[u(p(O(a.row.uploadTime)),1)]),_:1}),t(g,{label:"操作",width:"180",fixed:"right"},{default:l(a=>[t(c,{type:"primary",size:"small",onClick:L=>A(a.row)},{default:l(()=>[...e[18]||(e[18]=[u("预览",-1)])]),_:1},8,["onClick"]),t(c,{type:"success",size:"small",onClick:L=>M(a.row)},{default:l(()=>[...e[19]||(e[19]=[u("通过",-1)])]),_:1},8,["onClick"]),t(c,{type:"danger",size:"small",onClick:L=>$(a.row)},{default:l(()=>[...e[20]||(e[20]=[u("拒绝",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"]),o("div",Be,[v.value.length>0?(x(),C("div",Te,[o("span",null,"已选择 "+p(v.value.length)+" 个视频",1),t(c,{type:"success",onClick:K},{default:l(()=>[...e[21]||(e[21]=[u("批量通过",-1)])]),_:1}),t(c,{type:"danger",onClick:R},{default:l(()=>[...e[22]||(e[22]=[u("批量拒绝",-1)])]),_:1})])):P("",!0),o("div",Ie,[t(oe,{"current-page":f.value.currentPage,"onUpdate:currentPage":e[2]||(e[2]=a=>f.value.currentPage=a),"page-size":f.value.pageSize,"onUpdate:pageSize":e[3]||(e[3]=a=>f.value.pageSize=a),"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",total:T.value.length,onSizeChange:G,onCurrentChange:H},null,8,["current-page","page-size","total"])])])]),_:1})]),_:1})]),_:1})]),_:1}),t(ue,{modelValue:y.value,"onUpdate:modelValue":e[6]||(e[6]=a=>y.value=a),title:"视频预览",width:"80%","before-close":z},{default:l(()=>[d.value?(x(),C("div",Ue,[o("video",{src:d.value.videoUrl,controls:"",class:"preview-player"},null,8,Me),o("div",$e,[o("h3",null,p(d.value.title),1),o("p",De,"上传者："+p(d.value.uploader),1),o("p",Ee,"分类："+p(Q(d.value.category)),1),o("p",Le,[e[23]||(e[23]=o("strong",null,"视频描述：",-1)),u(" "+p(d.value.description||"无描述"),1)]),o("div",Ne,[e[24]||(e[24]=o("strong",null,"标签：",-1)),(x(!0),C(he,null,we(d.value.tags,a=>(x(),ye(se,{key:a,class:"tag-item"},{default:l(()=>[u(p(a),1)]),_:2},1024))),128)),d.value.tags.length===0?(x(),C("span",je,"无标签")):P("",!0)])]),o("div",Fe,[t(c,{type:"success",onClick:e[4]||(e[4]=a=>M(d.value))},{default:l(()=>[...e[25]||(e[25]=[u("通过审核",-1)])]),_:1}),t(c,{type:"danger",onClick:e[5]||(e[5]=a=>$(d.value))},{default:l(()=>[...e[26]||(e[26]=[u("拒绝审核",-1)])]),_:1})])])):P("",!0)]),_:1},8,["modelValue"])])}}},qe=de(Ae,[["__scopeId","data-v-0d070d56"]]);export{qe as default};
