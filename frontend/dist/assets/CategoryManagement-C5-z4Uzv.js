import{_ as ge,r as g,I as W,x as be,c as U,a as h,b as t,w as l,d as i,e as d,i as V,m as we,v as Ce,y as Ve,n as xe,p as he,f as s,A as ye,G as Oe,h as L,B as ke,H as Te,g as Ue,t as B,J as Be,E as v,C as S}from"./index-OILW0-7z.js";const Se={class:"category-management-container"},De={class:"header-content"},Fe={class:"breadcrumb"},$e={class:"header-actions"},ze={class:"card-header"},Ee={class:"filter-section"},Ie={class:"category-item"},Le={key:0,class:"table-footer"},Re={class:"batch-actions"},Me={key:0,class:"icon-preview"},Ne={key:0,class:"icon-preview"},Ae={__name:"CategoryManagement",setup(qe){const R=g("category-management"),x=g(""),D=g(!1),m=g([]),y=g(!1),O=g(!1),k=g(),T=g(),u=W({name:"",description:"",icon:"/logo.png",sortOrder:1,status:"active"}),r=W({id:"",name:"",description:"",icon:"",sortOrder:1,status:"active"}),M={name:[{required:!0,message:"请输入分类名称",trigger:"blur"},{min:1,max:50,message:"分类名称长度在1到50个字符之间",trigger:"blur"}],description:[{max:200,message:"分类描述不能超过200个字符",trigger:"blur"}],icon:[{required:!0,message:"请输入分类图标URL",trigger:"blur"}],sortOrder:[{required:!0,message:"请输入排序号",trigger:"blur"}]},c=g([{id:"1",name:"生活",description:"日常生活、美食、旅行等相关视频",icon:"/logo.png",videoCount:128,status:"active",sortOrder:1,createTime:"2024-01-01 10:00:00"},{id:"2",name:"科技",description:"科技产品、数码评测、编程教程等相关视频",icon:"/logo.png",videoCount:256,status:"active",sortOrder:2,createTime:"2024-01-01 10:05:00"},{id:"3",name:"娱乐",description:"电影、音乐、游戏、综艺等娱乐内容",icon:"/logo.png",videoCount:342,status:"active",sortOrder:3,createTime:"2024-01-01 10:10:00"},{id:"4",name:"教育",description:"各类知识、技能、教程等教育内容",icon:"/logo.png",videoCount:178,status:"active",sortOrder:4,createTime:"2024-01-01 10:15:00"},{id:"5",name:"音乐",description:"音乐作品、演唱会、乐器教学等内容",icon:"/logo.png",videoCount:95,status:"active",sortOrder:5,createTime:"2024-01-01 10:20:00"},{id:"6",name:"其他",description:"其他类型的视频内容",icon:"/logo.png",videoCount:67,status:"active",sortOrder:6,createTime:"2024-01-01 10:25:00"}]),G=be(()=>{let n=[...c.value];if(x.value){const e=x.value.toLowerCase();n=n.filter(a=>a.name.toLowerCase().includes(e)||a.description.toLowerCase().includes(e))}return n.sort((e,a)=>e.sortOrder-a.sortOrder),n});function H(n){R.value=n,console.log("选择菜单:",n)}function N(){console.log("搜索关键词:",x.value)}function J(){x.value=""}function P(n){m.value=n}function Q(){D.value=!0,setTimeout(()=>{D.value=!1,v.success("数据已刷新")},500)}function X(){Object.assign(u,{name:"",description:"",icon:"/logo.png",sortOrder:1,status:"active"}),y.value=!0}function F(){k.value&&k.value.resetFields(),y.value=!1}function Y(){k.value.validate(n=>{if(n){const e={id:Date.now().toString(),...u,videoCount:0,createTime:new Date().toLocaleString("zh-CN")};c.value.push(e),F(),v.success("分类添加成功")}else return console.log("表单验证失败"),!1})}function Z(n){Object.assign(r,{...n}),O.value=!0}function $(){T.value&&T.value.resetFields(),O.value=!1}function ee(){T.value.validate(n=>{if(n){const e=c.value.findIndex(a=>a.id===r.id);if(e!==-1){const a=c.value[e];c.value[e]={...r,videoCount:a.videoCount,createTime:a.createTime},$(),v.success("分类更新成功")}}else return console.log("表单验证失败"),!1})}function te(n){if(n.videoCount>0){v.warning("该分类下还有视频，无法删除");return}S.confirm(`确定要删除分类 "${n.name}" 吗？`,"删除确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"error"}).then(()=>{const e=c.value.findIndex(a=>a.id===n.id);e!==-1&&(c.value.splice(e,1),v.success("分类删除成功"))}).catch(()=>{})}function le(n){v.success(`分类 "${n.name}" 状态已更新为${n.status==="active"?"启用":"禁用"}`)}function oe(n){console.log("排序更新:",n.name,"新排序:",n.sortOrder)}function ne(){S.confirm(`确定要启用选中的 ${m.value.length} 个分类吗？`,"批量启用",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{m.value.forEach(n=>{const e=c.value.findIndex(a=>a.id===n.id);e!==-1&&(c.value[e].status="active")}),m.value=[],v.success("批量启用成功")}).catch(()=>{})}function ae(){S.confirm(`确定要禁用选中的 ${m.value.length} 个分类吗？`,"批量禁用",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{m.value.forEach(n=>{const e=c.value.findIndex(a=>a.id===n.id);e!==-1&&(c.value[e].status="inactive")}),m.value=[],v.success("批量禁用成功")}).catch(()=>{})}function ie(){if(m.value.filter(e=>e.videoCount>0).length>0){v.warning("部分分类下还有视频，无法删除");return}S.confirm(`确定要删除选中的 ${m.value.length} 个分类吗？`,"批量删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"error"}).then(()=>{m.value.forEach(e=>{const a=c.value.findIndex(b=>b.id===e.id);a!==-1&&c.value.splice(a,1)}),m.value=[],v.success("批量删除成功")}).catch(()=>{})}function de(n){return new Date(n).toLocaleString("zh-CN")}return(n,e)=>{const a=i("el-icon"),b=i("el-menu-item"),se=i("el-menu"),re=i("el-aside"),A=i("el-breadcrumb-item"),ue=i("el-breadcrumb"),p=i("el-button"),me=i("el-header"),w=i("el-input"),_=i("el-table-column"),z=i("el-avatar"),ce=i("el-tag"),E=i("el-switch"),I=i("el-input-number"),pe=i("el-table"),fe=i("el-card"),ve=i("el-main"),q=i("el-container"),f=i("el-form-item"),K=i("el-form"),j=i("el-dialog"),_e=Te("loading");return h(),U("div",Se,[t(q,{class:"main-container"},{default:l(()=>[t(re,{width:"240px",class:"sidebar"},{default:l(()=>[e[18]||(e[18]=d("div",{class:"sidebar-header"},[d("h2",null,"视频管理系统")],-1)),t(se,{"default-active":R.value,class:"el-menu-vertical",onSelect:H},{default:l(()=>[t(b,{index:"dashboard"},{default:l(()=>[t(a,null,{default:l(()=>[t(V(we))]),_:1}),e[13]||(e[13]=d("span",null,"数据概览",-1))]),_:1}),t(b,{index:"video-management"},{default:l(()=>[t(a,null,{default:l(()=>[t(V(Ce))]),_:1}),e[14]||(e[14]=d("span",null,"视频管理",-1))]),_:1}),t(b,{index:"pending-videos"},{default:l(()=>[t(a,null,{default:l(()=>[t(V(Ve))]),_:1}),e[15]||(e[15]=d("span",null,"待审核视频",-1))]),_:1}),t(b,{index:"users"},{default:l(()=>[t(a,null,{default:l(()=>[t(V(xe))]),_:1}),e[16]||(e[16]=d("span",null,"用户管理",-1))]),_:1}),t(b,{index:"category-management"},{default:l(()=>[t(a,null,{default:l(()=>[t(V(he))]),_:1}),e[17]||(e[17]=d("span",null,"分类管理",-1))]),_:1})]),_:1},8,["default-active"])]),_:1}),t(q,null,{default:l(()=>[t(me,{height:"60px",class:"header"},{default:l(()=>[d("div",De,[d("div",Fe,[t(ue,{separator:"/"},{default:l(()=>[t(A,{to:{path:"/admin"}},{default:l(()=>[...e[19]||(e[19]=[s("首页",-1)])]),_:1}),t(A,null,{default:l(()=>[...e[20]||(e[20]=[s("分类管理",-1)])]),_:1})]),_:1})]),d("div",$e,[t(p,{type:"primary",onClick:Q},{default:l(()=>[t(a,null,{default:l(()=>[t(V(ye))]),_:1}),e[21]||(e[21]=s(" 刷新 ",-1))]),_:1})])])]),_:1}),t(ve,{class:"content"},{default:l(()=>[t(fe,null,{header:l(()=>[d("div",ze,[e[23]||(e[23]=d("span",null,"分类管理",-1)),t(p,{type:"primary",onClick:X},{default:l(()=>[t(a,null,{default:l(()=>[t(V(Be))]),_:1}),e[22]||(e[22]=s(" 添加分类 ",-1))]),_:1})])]),default:l(()=>[d("div",Ee,[t(w,{modelValue:x.value,"onUpdate:modelValue":e[0]||(e[0]=o=>x.value=o),placeholder:"搜索分类名称",class:"search-input","prefix-icon":"Search",onKeyup:ke(N,["enter"])},null,8,["modelValue"]),t(p,{type:"primary",onClick:N},{default:l(()=>[...e[24]||(e[24]=[s("搜索",-1)])]),_:1}),t(p,{onClick:J},{default:l(()=>[...e[25]||(e[25]=[s("重置",-1)])]),_:1})]),Oe((h(),Ue(pe,{data:G.value,style:{width:"100%"},onSelectionChange:P},{default:l(()=>[t(_,{type:"selection",width:"55"}),t(_,{prop:"id",label:"ID",width:"80"}),t(_,{prop:"name",label:"分类名称","min-width":"150"},{default:l(o=>[d("div",Ie,[t(z,{size:36,src:o.row.icon,class:"category-icon"},null,8,["src"]),d("span",null,B(o.row.name),1)])]),_:1}),t(_,{prop:"description",label:"分类描述","min-width":"200"}),t(_,{prop:"videoCount",label:"视频数量",width:"120"},{default:l(o=>[t(ce,{size:"small"},{default:l(()=>[s(B(o.row.videoCount),1)]),_:2},1024)]),_:1}),t(_,{prop:"status",label:"状态",width:"100"},{default:l(o=>[t(E,{modelValue:o.row.status,"onUpdate:modelValue":C=>o.row.status=C,"active-value":"active","inactive-value":"inactive",onChange:C=>le(o.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),t(_,{prop:"sortOrder",label:"排序",width:"100"},{default:l(o=>[t(I,{modelValue:o.row.sortOrder,"onUpdate:modelValue":C=>o.row.sortOrder=C,min:1,max:99,onChange:C=>oe(o.row),size:"small"},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),t(_,{prop:"createTime",label:"创建时间",width:"180"},{default:l(o=>[s(B(de(o.row.createTime)),1)]),_:1}),t(_,{label:"操作",width:"180",fixed:"right"},{default:l(o=>[t(p,{type:"primary",size:"small",onClick:C=>Z(o.row)},{default:l(()=>[...e[26]||(e[26]=[s("编辑",-1)])]),_:1},8,["onClick"]),t(p,{type:"danger",size:"small",onClick:C=>te(o.row),disabled:o.row.videoCount>0},{default:l(()=>[...e[27]||(e[27]=[s("删除",-1)])]),_:1},8,["onClick","disabled"])]),_:1})]),_:1},8,["data"])),[[_e,D.value]]),m.value.length>0?(h(),U("div",Le,[d("div",Re,[d("span",null,"已选择 "+B(m.value.length)+" 个分类",1),t(p,{type:"success",onClick:ne},{default:l(()=>[...e[28]||(e[28]=[s("批量启用",-1)])]),_:1}),t(p,{type:"warning",onClick:ae},{default:l(()=>[...e[29]||(e[29]=[s("批量禁用",-1)])]),_:1}),t(p,{type:"danger",onClick:ie},{default:l(()=>[...e[30]||(e[30]=[s("批量删除",-1)])]),_:1})])])):L("",!0)]),_:1})]),_:1})]),_:1})]),_:1}),t(j,{modelValue:y.value,"onUpdate:modelValue":e[6]||(e[6]=o=>y.value=o),title:"添加分类",width:"500px","before-close":F},{footer:l(()=>[t(p,{onClick:F},{default:l(()=>[...e[31]||(e[31]=[s("取消",-1)])]),_:1}),t(p,{type:"primary",onClick:Y},{default:l(()=>[...e[32]||(e[32]=[s("添加",-1)])]),_:1})]),default:l(()=>[t(K,{model:u,rules:M,ref_key:"addFormRef",ref:k,"label-width":"100px"},{default:l(()=>[t(f,{label:"分类名称",prop:"name"},{default:l(()=>[t(w,{modelValue:u.name,"onUpdate:modelValue":e[1]||(e[1]=o=>u.name=o),placeholder:"请输入分类名称",maxlength:"50","show-word-limit":""},null,8,["modelValue"])]),_:1}),t(f,{label:"分类描述",prop:"description"},{default:l(()=>[t(w,{modelValue:u.description,"onUpdate:modelValue":e[2]||(e[2]=o=>u.description=o),type:"textarea",rows:3,placeholder:"请输入分类描述",maxlength:"200","show-word-limit":""},null,8,["modelValue"])]),_:1}),t(f,{label:"分类图标",prop:"icon"},{default:l(()=>[t(w,{modelValue:u.icon,"onUpdate:modelValue":e[3]||(e[3]=o=>u.icon=o),placeholder:"请输入图标URL"},null,8,["modelValue"]),u.icon?(h(),U("div",Me,[t(z,{size:60,src:u.icon},null,8,["src"])])):L("",!0)]),_:1}),t(f,{label:"排序",prop:"sortOrder"},{default:l(()=>[t(I,{modelValue:u.sortOrder,"onUpdate:modelValue":e[4]||(e[4]=o=>u.sortOrder=o),min:1,max:99},null,8,["modelValue"])]),_:1}),t(f,{label:"状态"},{default:l(()=>[t(E,{modelValue:u.status,"onUpdate:modelValue":e[5]||(e[5]=o=>u.status=o),"active-value":"active","inactive-value":"inactive"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),t(j,{modelValue:O.value,"onUpdate:modelValue":e[12]||(e[12]=o=>O.value=o),title:"编辑分类",width:"500px","before-close":$},{footer:l(()=>[t(p,{onClick:$},{default:l(()=>[...e[33]||(e[33]=[s("取消",-1)])]),_:1}),t(p,{type:"primary",onClick:ee},{default:l(()=>[...e[34]||(e[34]=[s("保存",-1)])]),_:1})]),default:l(()=>[t(K,{model:r,rules:M,ref_key:"editFormRef",ref:T,"label-width":"100px"},{default:l(()=>[t(f,{label:"分类名称",prop:"name"},{default:l(()=>[t(w,{modelValue:r.name,"onUpdate:modelValue":e[7]||(e[7]=o=>r.name=o),placeholder:"请输入分类名称",maxlength:"50","show-word-limit":""},null,8,["modelValue"])]),_:1}),t(f,{label:"分类描述",prop:"description"},{default:l(()=>[t(w,{modelValue:r.description,"onUpdate:modelValue":e[8]||(e[8]=o=>r.description=o),type:"textarea",rows:3,placeholder:"请输入分类描述",maxlength:"200","show-word-limit":""},null,8,["modelValue"])]),_:1}),t(f,{label:"分类图标",prop:"icon"},{default:l(()=>[t(w,{modelValue:r.icon,"onUpdate:modelValue":e[9]||(e[9]=o=>r.icon=o),placeholder:"请输入图标URL"},null,8,["modelValue"]),r.icon?(h(),U("div",Ne,[t(z,{size:60,src:r.icon},null,8,["src"])])):L("",!0)]),_:1}),t(f,{label:"排序",prop:"sortOrder"},{default:l(()=>[t(I,{modelValue:r.sortOrder,"onUpdate:modelValue":e[10]||(e[10]=o=>r.sortOrder=o),min:1,max:99},null,8,["modelValue"])]),_:1}),t(f,{label:"状态"},{default:l(()=>[t(E,{modelValue:r.status,"onUpdate:modelValue":e[11]||(e[11]=o=>r.status=o),"active-value":"active","inactive-value":"inactive"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}},je=ge(Ae,[["__scopeId","data-v-95118da0"]]);export{je as default};
